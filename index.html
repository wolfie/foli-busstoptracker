<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="x-ua-compatible" content="IE=11">
    <link rel='stylesheet' href='css/animate.css' type='text/css' media='all' />
    <link rel='stylesheet' href='css/styles.css' type='text/css' media='all' />
</head>
<body>
<header>
    <section id="left">
        <img src="images/foli_logo.png" alt="Föli">
    </section>
    <section id="middle">
        <br/>
        <span id="clock"></span>
    </section>
    <section id="right">
        <br/>
        <br/>
        <img src="images/lilja.png" alt="">
    </section>
</header>
<div id="tableheader">
    <div id="headerLine" data-swaptext="Linja|Linje"></div>
    <div id="headerDest" data-swaptext="Määränpää|Destination"></div>
    <div id="headerDepa" data-swaptext="Lähtö|Avgång"></div>
    <div id="headerStop" data-swaptext="Pys.|Stop"></div>
</div>
<span id="icontent"></span>

<script type="text/javascript">
    (function() {
        function updateClock() {
            var t = new Date();
            var H = t.getHours();
            var M = t.getMinutes();
            if (H < 10)
                H = "0" + H;
            if (M < 10)
                M = "0" + M;

            clock.textContent = H + ":" + M;
            setTimeout(updateClock, 1000);
        }
        updateClock();

        /**
         * Swap two pieces of text in an element.
         * <p>
         * The texts are taken from the <code>data-swaptext</code> attribute of the element, separated
         * with a vertical pipe: |
         *
         * @param {HTMLElement} element
         * @param {object} [options]
         * @param {number} options.speed
         * @param {string} options.duration
         * @param {string} options.fadeOutFunction
         * @param {string} options.fadeInFunction
         */
        function swapText(element, options) {
            if (!options) {
                options = {
                    speed: 5000,
                    duration: "1s",
                    fadeOutFunction: "cubic-bezier(0.55, 0.06, 0.68, 0.19)",
                    fadeInFunction: "cubic-bezier(0.22, 0.61, 0.36, 1)"
                };
            }

            //noinspection JSUnresolvedVariable
            var text = element.dataset.swaptext;
            if (!text) {
                element.textContent = "Can't find text to swap";
                return;
            }
            var splits = text.split('|', 2);

            if (!element.dataset.swapIsInitied) {
                element.dataset.swapIsInitied = true;
                element.style.opacity = 1;
                element.style.transitionProperty = "opacity";
                element.style.transitionDuration = options.duration;
                element.textContent = splits[0];
            }

            else {
                var swapOut = function() {
                    element.textContent = (element.textContent === splits[0]) ? splits[1] : splits[0];
                    element.style.transitionTimingFunction = options.fadeInFunction;
                    element.style.opacity = 1;
                    element.removeEventListener('transitionend', swapOut);
                };
                element.addEventListener('transitionend', swapOut);
                element.style.transitionTimingFunction = options.fadeOutFunction;
                element.style.opacity = 0;
            }

            setTimeout(function() {
              swapText(element);
            }, options.speed);
        }

        swapText(headerLine);
        swapText(headerDest);
        swapText(headerDepa);
        swapText(headerStop);
    })();
</script>

<script src="js/stops3.js" type="text/javascript"></script>
</body>
</html>